<div class="container theme-showcase" role="main" ng-controller="listBookController">

	<div class="jumbotron" style="background-color: #337ab7 !important;">
		<h1 align="center">Welcome Administrater</h1>
	</div>
	<div class="page-header">
		<div class="col-md-6" align="left">
			<h1 style="font-size: 24px !important;">Please select your
				action:</h1>
		</div>

	</div>
	<div class="col-md-6" align="right">
        <div class="row">
            <div class="input-group">
                <input type="text" class="form-control" ng-model="searchString" placeholder="Search" ng-change="searchBook()">
            </div>
        </div>
	</div>

		<!-- Start Menu Block to the left side -->

    <div class="row">

		<div class="col-sm-2" align="center" style="float: left;">

			<div class="panel-group" id="accordion">
				<div class="panel panel-default panel-info">
					<div class="panel-heading">
						<h4 class="panel-title myCollapseItem myCollapseItem">
							<a data-toggle="collapse" data-parent="#accordion" data-target="#collapse1">Book</a>
						</h4>
					</div>
					<div id="collapse1" class="panel-collapse collapse in">
						<div class="list-group">
							<a class="panel-collapse collapse">Book</a> 
							<a ng-click="addBookClicked()" class="list-group-item" >Add</a> 
							<a onClick="deleteBookClicked()" class="list-group-item">Delete</a> 
							<a onClick="updateBookClicked()" class="list-group-item">Update</a> 
							<a onClick="viewBookClicked()" class="list-group-item">View</a>
						</div>
					</div>
				</div>
				<div class="panel panel-default panel-info">
					<div class="panel-heading">
						<h4 class="panel-title myCollapseItem">
							<a data-toggle="collapse" data-parent="#accordion"
								data-target="#collapse2">Author</a>
						</h4>
					</div>
					<div id="collapse2" class="panel-collapse collapse">
						<div class="list-group">
							<a class="panel-collapse collapse">Author</a> 
							<a onClick="addAuthorClicked()" class="list-group-item" >Add</a> 
							<a onClick="deleteAuthorClicked()" class="list-group-item">Delete</a> 
							<a onClick="updateAuthorClicked()" class="list-group-item">Update</a> 
							<a onClick="viewAuthorClicked()" class="list-group-item">View</a>
						</div>
					</div>
				</div>
				<div class="panel panel-default panel-info">
					<div class="panel-heading">
						<h4 class="panel-title myCollapseItem">
							<a data-toggle="collapse" data-parent="#accordion"
								data-target="#collapse3">Publisher</a>
						</h4>
					</div>
					<div id="collapse3" class="panel-collapse collapse">
						<div class="list-group">
							<a class="panel-collapse collapse">Publisher</a> 
							<a onClick="addPublisherClicked()" class="list-group-item" >Add</a> 
							<a onClick="deletePublisherClicked()" class="list-group-item">Delete</a> 
							<a onClick="updatePublisherClicked()" class="list-group-item">Update</a> 
							<a onClick="viewPublisherClicked()" class="list-group-item">View</a>
						</div>
					</div>
				</div>
				<div class="panel panel-default panel-info">
					<div class="panel-heading">
						<h4 class="panel-title myCollapseItem">
							<a data-toggle="collapse" data-parent="#accordion"
								data-target="#collapse4">Branch</a>
						</h4>
					</div>
					<div id="collapse4" class="panel-collapse collapse">
						<div class="list-group">
							<a class="panel-collapse collapse">Branch</a> 
							<a onClick="addBranchClicked()" class="list-group-item" >Add</a> 
							<a onClick="deleteBranchClicked()" class="list-group-item">Delete</a> 
							<a onClick="updateBranchClicked()" class="list-group-item">Update</a> 
							<a onClick="viewBranchClicked()" class="list-group-item">View</a>
						</div>
					</div>
				</div>
				<div class="panel panel-default panel-info">
					<div class="panel-heading">
						<h4 class="panel-title myCollapseItem">
							<a data-toggle="collapse" data-parent="#accordion"
								data-target="#collapse5">Borrower</a>
						</h4>
					</div>
					<div id="collapse5" class="panel-collapse collapse">
						<div class="list-group">
							<a class="panel-collapse collapse">Borrower</a> 
							<a onClick="addBorrowerClicked()" class="list-group-item" >Add</a> 
							<a onClick="deleteBorrowerClicked()" class="list-group-item">Delete</a> 
							<a onClick="updateBorrowerClicked()" class="list-group-item">Update</a> 
							<a onClick="viewBorrowerClicked()" class="list-group-item">View</a>
						</div>
					</div>
				</div>
				<div class="panel panel-default panel-info">
					<div class="panel-heading">
						<h4 class="panel-title myCollapseItem">
							<a data-toggle="collapse" data-parent="#accordion"
								data-target="#collapse6">Genre</a>
						</h4>
					</div>
					<div id="collapse6" class="panel-collapse collapse">
						<div class="list-group">
							<a class="panel-collapse collapse">Genre</a> 
							<a onClick="addGenreClicked()" class="list-group-item" >Add</a> 
							<a onClick="deleteGenreClicked()" class="list-group-item">Delete</a> 
							<a onClick="updateGenreClicked()" class="list-group-item">Update</a> 
							<a onClick="viewGenreClicked()" class="list-group-item">View</a>
						</div>
					</div>
				</div>
				<div class="panel panel-default panel-info">
					<div class="panel-heading">
						<h4 class="panel-title myCollapseItem">
							<a data-toggle="collapse" data-parent="#accordion"
								data-target="#collapse7">Loan</a>
						</h4>
					</div>
					<div id="collapse7" class="panel-collapse collapse">
						<div class="list-group">
							<a class="panel-collapse collapse">Loan</a> 
							<a onClick="updateLoanClicked()" class="list-group-item">Override Due</a> 
							<a onClick="viewLoanClicked()" class="list-group-item">View</a>
						</div>
					</div>
				</div>


			</div>

		</div>

		<!-- End Menu Block to the left side -->


		<!-- 	BooK Table on the right -->
		<div class="col-lg-10" align="center" style="float: right;">

			<table class="table table-striped" style="text-align: center;">
				<tr style="text-align: center;">
					<th style="text-align: center;">#</th>
					<th style="text-align: center;">Book Title</th>
					<th style="text-align: center;">Author</th>
					<th style="text-align: center;">Publisher</th>
					<th style="text-align: center;">Genre</th>
					<th style="text-align: center;" ng-if="showEditButton">Edit</th>
					<th style="text-align: center;" ng-if="showDeleteButton">Delete</th>
					<th style="text-align: center;" ng-if="showUpdateButton">Update</th>
				</tr>
                <tr ng-repeat="b in books | startFrom: pagination.page * pagination.perPage | limitTo: pagination.perPage">
                    <td>{{$index+1}}</td>
                    <td>{{b.title}}</td>
                    <td>
                        <div class="col-sm-1">
							<div class="dropdown" style="width: 200px;">
								<button class="btn btn-info dropdown-toggle" type="button"
									data-toggle="dropdown">
									Author <span class="caret"></span>
								</button>
								<ul class="dropdown-menu">
									<li ng-if="b.authors.length==0"><a>No author stored</a></li>
                                    <li ng-if="b.authors.length!=0" ng-repeat="a in b.authors">{{a.authorName}}</li>
								</ul>
							</div>
						</div>
                    </td>
                    
					<td>{{b.publisher.publisherName}}</td>
                    
                    <td>
                        <div class="col-sm-1">
							<div class="dropdown" style="width: 200px;">
								<button class="btn btn-info dropdown-toggle" type="button"
									data-toggle="dropdown">
									Genre <span class="caret"></span>
								</button>
								<ul class="dropdown-menu">
									<li ng-if="b.genres.length==0"><a>No genre stored</a></li>
                                    <li ng-if="b.genres.length!=0" ng-repeat="g in b.genres">{{g.genre_name}}</li>
								</ul>
							</div>
						</div>
                    </td>

                    <td ng-if="showEditButton"><button class="btn btn-sm btn-primary" onClick="editBook(b.bookId)">Edit</button></td>
					<td ng-if="showDeleteButton"><button class="btn btn-sm btn-danger" onClick="deleteBook(b.bookId)">Delete</button></td>
					<td ng-if="showUpdateButton"><button class="btn btn-sm btn-warning" onClick="updateBook(b.bookId)">Update</button></td>
				</tr>
			</table>

			<nav aria-label="Page navigation">
				<ul class="pagination">
        			<li ng-repeat="n in [] | range: pagination.numPages" ng-class="{active: n == pagination.page}"><a href="" ng-click="pagination.toPageId(n)">{{n + 1}}</a></li>
				</ul>
			</nav>
		</div>
		<!-- 	End BooK Table on the right -->
	</div>
    
    
    <!--  AddBookModal  -->
<!--
    <div class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" id="addBookClicked" modal="addBookClicked" ng-if="showAddBookModal">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"
                        aria-label="Close" ng-click="addBookModalClose()">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <h3>Enter details to add book: </h3>
                    Enter book title: <input type="text" ng-modal="selectedTitle" style="margin-right: 40px">

                    Select a publisher: <select ng-modal="selectedPublisher">
                        <option ng-repeat="p in publishers" value="{{p}}"> {{p.publisherName}} </option>
                    </select><br /><br /> 

                    Select authors: <select multiple="multiple" ng-modal = "selectedAuthors" style="margin-right: 40px;width: 172px;height: 100px;">
                        <option ng-repeat="a in authors" value="{{a}}"> {{a.authorName}} </option>
                    </select>

                    Select genres: <select multiple="multiple" ng-modal = "selectedGenre" style="margin-right: 40px;width: 172px;height: 100px;">
                        <option ng-repeat="g in genres" value="{{g}}"> {{g.genre_name}} </option>
                    </select><br /><br /> 

                </div>
                <div class="modal-footer">
                    <button class="btn btn-info" type="button" >Add Book</button>
                    <button type="button" class="btn btn-default" data-dismiss="modal" ng-click="addBookModalClose()">Close</button>
                </div>
            </div>
        </div>
    </div>
-->
    
    <script type="text/ng-template" id="addBookModal.html">
        <div class="modal-header">
            <h3 class="modal-title">I'm a modal!</h3>
        </div>
        <div class="modal-body">
            <form name="myForm">
                    <h3>Enter details to add book: </h3>
                    Enter book title: <input type="text" ng-model="newBook.title" style="margin-right: 40px">

                    Select a publisher: <select ng-model="newBook.publisher">
                        <option ng-repeat="p in publishers" value={{p}}> {{p.publisherName}} </option>
                    </select><br /><br /> 

                    Select authors: <select multiple="multiple" ng-model = "newBook.authors" style="margin-right: 40px;width: 172px;height: 100px;">
                        <option ng-repeat="a in authors" value="{{a}}"> {{a.authorName}} </option>
                    </select>

                    Select genres: <select multiple="multiple" ng-model = "newBook.genres" style="margin-right: 40px;width: 172px;height: 100px;">
                        <option ng-repeat="g in genres" value="{{g}}"> {{g.genre_name}} </option>
                    </select><br /><br /> 
            </form>
                </div>
        <div class="modal-footer">
            <button class="btn btn-primary" type="button" ng-click="ok()">OK</button>
            <button class="btn btn-warning" type="button" ng-click="cancel()">Cancel</button>
        </div>
    </script>
</div>

